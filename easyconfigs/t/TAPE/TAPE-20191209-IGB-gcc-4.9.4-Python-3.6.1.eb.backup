easyblock = 'PythonPackage'

name = 'TAPE'
version = '20191209'
commit = '3f55c78'
versionsuffix = '-Python-%(pyver)s'

homepage = 'https://github.com/songlab-cal/tape'
description = """Tasks Assessing Protein Embeddings (TAPE), a set of five biologically relevant semi-supervised learning tasks spread across different domains of protein biology."""

toolchain = {'name': 'IGB-gcc', 'version': '4.9.4'}

sources = ['%s.tar.gz' % commit]
source_urls = ['https://github.com/songlab-cal/tape-neurips2019/archive/']

dependencies = [
        ('Python', '3.6.1'),
	('Biopython','1.76','-Python-%(pyver)s'),
	('Tensorflow-GPU','1.14.0','-Python-3.6.1'),
]

exts_defaultclass = "PythonPackage"
exts_list = [
('rinokeras', '1.1.1', {
        'modulename': 'rinokeras',
        'source_urls': ['https://pypi.python.org/packages/source/r/rinokeras/'],
        'source_tmpl': 'rinokeras-%(version)s.tar.gz',
        'unpack_sources': False,
        'use_pip': True,
    }),
('table-logger', '0.3.6', {
        'modulename': 'table_logger',
        'source_urls': ['https://pypi.python.org/packages/source/t/table-logger/'],
        'source_tmpl': 'table_logger-%(version)s-py3-none-any.whl',
        'unpack_sources': False,
        'use_pip': True,
    }),
('sacred', '0.8.1', {
        'modulename': 'sacred',
        'source_urls': ['https://pypi.python.org/packages/source/s/sacred'],
        'source_tmpl': 'sacred-%(version)s.tar.gz',
        'unpack_sources': False,
        'use_pip': True,
    }),
('toposort', '1.5', {
        'modulename': 'toposort',
        'source_urls': ['https://pypi.python.org/packages/source/t/toposort'],
        'source_tmpl': 'toposort-%(version)s-py2.py3-none-any.whl',
        'unpack_sources': False,
        'use_pip': True,
    }),
]

use_pip = True
use_pip_for_deps = True

#exts_filter = ('python -c "import %(ext_name)s"', "")
exts_filter = ('','')

sanity_check_paths = {
        'files': ['bin/tape-eval'],
        'dirs': [],
}

moduleclass = 'bio'
